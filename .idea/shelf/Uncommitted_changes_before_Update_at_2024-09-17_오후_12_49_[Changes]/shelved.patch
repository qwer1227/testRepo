Index: src/main/webapp/order/order.jsp
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><%@ page import=\"com.jhta.afterpay.addr.AddrDao\" %>\r\n<%@ page import=\"com.jhta.afterpay.addr.Addr\" %>\r\n<%@ page import=\"com.jhta.afterpay.user.User\" %>\r\n<%@ page import=\"com.jhta.afterpay.payment.Payment\" %>\r\n<%@ page import=\"com.jhta.afterpay.payment.PaymentDao\" %>\r\n<%@ page import=\"com.jhta.afterpay.order.Order\" %>\r\n<%@ page import=\"com.jhta.afterpay.order.OrderDao\" %>\r\n<%@ page import=\"com.jhta.afterpay.user.UserDao\" %>\r\n<%@ page import=\"java.util.List\" %>\r\n<%@ page import=\"com.jhta.afterpay.delivery.DeliveryDao\" %>\r\n<%@ page import=\"com.jhta.afterpay.delivery.Delivery\" %>\r\n<%@ page import=\"com.jhta.afterpay.product.Product\" %>\r\n<%@ page import=\"com.jhta.afterpay.delivery.Stock\" %>\r\n<%@ page contentType=\"text/html;charset=utf-8\" pageEncoding=\"utf-8\" %>\r\n<%\r\n\r\n    // 쿼리 파라미터\r\n    String address = request.getParameter(\"address\");                               // 주소\r\n    String detailAddr = request.getParameter(\"detailAddress\");                      // 상세주소\r\n    String tel = request.getParameter(\"tel\");                                       // 전화번호\r\n    String zipcode = request.getParameter(\"zipcode\");                               // 우편번호\r\n//    String email = request.getParameter(\"email\");                                   // 이메일\r\n    String recipient = request.getParameter(\"recipient\");                           // 수령인\r\n//    String userName = request.getParameter(\"userName\");                             // 주문자명\r\n//    int totalPrice = Integer.parseInt(request.getParameter(\"totalPrice\"));          // 주문 가격\r\n//    int discountPrice = Integer.parseInt(request.getParameter(\"discountPrice\"));    // 할인 가격\r\n//    int deliveryPrice = Integer.parseInt(request.getParameter(\"deliveryPrice\"));    // 배송비\r\n    int paymentPrice = Integer.parseInt(request.getParameter(\"paymentPrice\"));      // 결제 금액\r\n\r\n\r\n    // 주문 회원 정보\r\n    UserDao userDao = new UserDao();\r\n    User user = userDao.getUserById(\"hong\"); // 회원ID는 세션값으로 구할 예정\r\n\r\n    // 배송지 저장\r\n    AddrDao addrDao = new AddrDao();\r\n    Addr addr = new Addr();\r\n\r\n    addr.setAddr1(address);\r\n    addr.setAddr2(detailAddr);\r\n    addr.setTel(tel);\r\n    addr.setZipCode(zipcode);\r\n    addr.setName(\"집\");\r\n    addr.setIsAddrHome(\"Y\");\r\n    addr.setUser(user);\r\n\r\n    addrDao.insertAddr(addr);\r\n\r\n    List<Addr> addrs = addrDao.getAllAddrByUserNo(user.getNo());\r\n\r\n    Addr wantAddr = new Addr();\r\n    wantAddr.setUser(user);\r\n    for (Addr findAddr : addrs) {\r\n        if(findAddr.getAddr1().equals(address) && findAddr.getAddr2().equals(detailAddr)) {\r\n            wantAddr.setNo(findAddr.getNo());\r\n        }\r\n    }\r\n\r\n\r\n    // 주문정보 저장\r\n    OrderDao orderDao = new OrderDao();\r\n    Order order = new Order();\r\n    order.setPrice(paymentPrice);\r\n    order.setAmount(1);\r\n    order.setDeliveryPrice(1);\r\n    order.setUsePoint(1);\r\n    order.setDiscountPrice(1);\r\n    order.setPaymentPrice(paymentPrice);\r\n    order.setDepositPoint(1);\r\n    order.setAddr(wantAddr);\r\n    order.setUser(user);\r\n\r\n    orderDao.insertOrder(order);\r\n\r\n    Order payOrder = orderDao.getMostLatelyOrderNoByUserNo(user.getNo());\r\n\r\n    // 배송상품 저장\r\n    DeliveryDao deliveryDao = new DeliveryDao();\r\n    Delivery delivery = new Delivery();\r\n\r\n    Product product = new Product();\r\n    product.setNo(10000);\r\n    delivery.setProduct(product);\r\n\r\n    delivery.setOrder(payOrder);\r\n    delivery.setAmount(1);\r\n    delivery.setProduct(product);\r\n    delivery.setRecipient(recipient);\r\n\r\n    Stock stock = new Stock();\r\n    stock.setNo(1);\r\n    delivery.setStock(stock);\r\n\r\n    deliveryDao.insertDelivery(delivery);\r\n\r\n    // 결제정보 저장\r\n    PaymentDao paymentDao = new PaymentDao();\r\n\r\n    Payment payment = new Payment();\r\n    payment.setPrice(paymentPrice);\r\n    payment.setOrder(payOrder);\r\n    paymentDao.insertPayment(payment);\r\n\r\n    response.sendRedirect(\"../index.jsp\");\r\n%>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/webapp/order/order.jsp b/src/main/webapp/order/order.jsp
--- a/src/main/webapp/order/order.jsp	(revision a22a77bbecd4c2ab293a5b4069bbd1d4b63f0ab9)
+++ b/src/main/webapp/order/order.jsp	(date 1726318836352)
@@ -49,6 +49,8 @@
     List<Addr> addrs = addrDao.getAllAddrByUserNo(user.getNo());
 
     Addr wantAddr = new Addr();
+
+    // 주소가 중복 저장된 경우에는 어떻게 ??
     wantAddr.setUser(user);
     for (Addr findAddr : addrs) {
         if(findAddr.getAddr1().equals(address) && findAddr.getAddr2().equals(detailAddr)) {
